<div class="oferta-container">
  <div class="actions">
    <button mat-raised-button color="primary" (click)="downloadPdf()">
      <img src="icon-pdf.png" alt="PDF" class="button-icon">
      Descargar PDF
    </button>
  </div>
  <div #pdfContent class="pdf-content">
    <div class="header">
      <div class="logo-container">
        <img src="logo_blanco.jpg" alt="Kinetta" class="logo">
      </div>
      <div class="header-info">
        <h2>Oferta del Cliente</h2>
        <p class="cliente-info">{{ cliente?.nombre }} - {{ cubicacion?.proyecto }}</p>
        <p class="proyecto-info">Proyecto: {{ cubicacion?.nombre }} / Fecha: {{ currentDate }}</p>
      </div>
    </div>

    <div class="productos-container">
      <div *ngFor="let producto of productos" class="producto-tabla">
        <table class="offer-table">
          <tr>
            <th colspan="2">{{ producto.codigo }}</th>
          </tr>
          <tr>
            <td>Dimensiones:</td>
            <td>{{ producto.ancho_diseno }}m x {{ producto.alto_diseno }}m</td>
          </tr>
          <tr class="rojo">
            <td>Serie de Perfiles:</td>
            <td>{{ producto.tipo_perfil | uppercase }}</td>
          </tr>
          <tr>
            <td>Vidrios:</td>
            <td>{{ getVidrioDetails(producto) }}</td>
          </tr>          <tr>
            <td colspan="2">
              <div class="imagen-grid">
                <div class="imagen-section">
                  <img src="plano-ejemplo.png" [alt]="producto.codigo">
                </div>                <div class="info-section">
                    <table class="detalles-precio">
                      <tr>
                        <td >Detalle</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td>Precio unitario</td>
                        <td class="valor">${{ formatNumber(producto.precio_unitario) }} USD</td>
                      </tr>
                      <tr class="rojo">
                        <td>Cantidad</td>
                        <td class="valor">{{ producto.superficie_total }} m² ({{ producto.cantidad }} Pzas.)</td>
                      </tr>
                      <tr>
                        <td>Valor Neto Total</td>
                        <td class="valor">${{ formatNumber(producto.precio_total) }} USD</td>
                      </tr>
                    </table>
                    <div class="observaciones">
                      {{ producto.observaciones || 'SIN OBSERVACIONES' }}
                    </div>
                </div>
              </div>
            </td>
          </tr>
        </table>
     
      </div>

    </div>

    <div class="resumen-final">
      <h3>Resumen Total</h3>
      <table class="total-table">
        <tr>
          <td>Total Superficie:</td>
          <td>{{ getTotalSurface() }} m²</td>
        </tr>
        <tr>
          <td>Total Piezas:</td>
          <td>{{ getTotalPieces() }} Pzas.</td>

        </tr>
        <tr class="total-row">
          <td>Valor Total Neto:</td>
          <td>${{ getTotalAmount() }} USD</td>
        </tr>
      </table>
    </div>

    <div class="footer">
      <p class="validez">Oferta válida por 30 días a partir de la fecha de emisión</p>
      <div class="firma">
        <img src="assets/images/firma.png" alt="Firma" class="firma-img">
      </div>
    </div>
  </div>
</div>
